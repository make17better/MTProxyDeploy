apt update && apt install -y vim git curl build-essential libssl-dev zlib1g-dev && git clone https://github.com/TelegramMessenger/MTProxy && cd MTProxy && make && cd objs/bin && curl -s https://core.telegram.org/getProxySecret -o proxy-secret && curl -s https://core.telegram.org/getProxyConfig -o proxy-multi.conf && randomHex=`head -c 16 /dev/urandom | xxd -ps` && echo -e "randomHex:\n${randomHex}" && touch /etc/systemd/system/MTProxy.service && echo "[Unit]" >> /etc/systemd/system/MTProxy.service && echo "Description=MTProxy" >> /etc/systemd/system/MTProxy.service && echo "After=network.target" >> /etc/systemd/system/MTProxy.service && echo "" >> /etc/systemd/system/MTProxy.service && echo "[Service]" >> /etc/systemd/system/MTProxy.service && echo "Type=simple" >> /etc/systemd/system/MTProxy.service && echo "WorkingDirectory=/root/MTProxy/objs/bin/" >> /etc/systemd/system/MTProxy.service && echo "ExecStart=/root/MTProxy/objs/bin/mtproto-proxy -u nobody -p 8888 -H 443 -S ${randomHex} --aes-pwd /root/MTProxy/objs/bin/proxy-secret /root/MTProxy/objs/bin/proxy-multi.conf -M 1 -D www.vultr.com" >> /etc/systemd/system/MTProxy.service && echo "Restart=on-failure" >> /etc/systemd/system/MTProxy.service && echo "" >> /etc/systemd/system/MTProxy.service && echo "[Install]" >> /etc/systemd/system/MTProxy.service && echo "WantedBy=multi-user.target" >> /etc/systemd/system/MTProxy.service && systemctl daemon-reload && systemctl enable MTProxy.service && ipv4addr=`curl ifconfig.me` && secret="ee${randomHex}7777772e76756c74722e636f6d" && echo -e "\ntg://proxy?server=${ipv4addr}&port=443&secret=${secret}" && echo "net.core.default_qdisc=fq" >> /etc/sysctl.conf && echo "net.ipv4.tcp_congestion_control=bbr" >> /etc/sysctl.conf && sysctl -p && lsmod | grep bbr
